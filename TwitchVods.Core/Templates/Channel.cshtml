@using RazorLight
@inherits TemplatePage<TwitchVods.Core.Templates.ChannelModel>
<html>
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=@Model.GoogleAnalyticsTrackingId"></script>
    <script>window.dataLayer = window.dataLayer || [];function gtag(){{dataLayer.push(arguments);}}gtag('js', new Date());gtag('config', '@Model.GoogleAnalyticsTrackingId');</script>
    <title>@Model.Channel.Name - Past Broadcasts</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

</head>
<body>
    <a href="#" ID="backToTop"></a>

    <div class="jumbotron">
        <div class="container-fluid">
            <h1>twitch.tv/@Model.Channel.Name - past broadcasts</h1>
            <p>This page lists all @(Model.Channel.TotalVideoCount:n0) of the past broadcasts for the channel twitch.tv/@Model.Channel.Name.</p></p>
            <p>Total video views: @(Model.Channel.TotalViewCount:n0).</p>
            <p>Total games played: @(Model.Channel..TotalGamesCount:n0).</p>
            <p>Total broadcast hours: @(Model.Channel.TotalBroadcastHours:n0) (@(Model.Channel.TotalBroadcastDays) days).</p>
            <p>Average length of broadcast: @Model.Channel..AverageBroadcastTime}.</p>
            <p><a class="btn btn-primary btn-lg" role="button" href="http://twitch.tv/{channelName}">Go to twitch.tv/@(Model.Channel.ToLower()) &raquo;</a></p>
            <p><a href="@(Model.Channel.Name.ToLower()).json">Download the raw data from this page as JSON.</a></p>
            <p><a href="https://github.com/RandomUser99/TwitchVods/">Source code available on GitHub.</a></p>

            @if (!string.IsNullOrWhiteSpace(@Model.RedditUsername))
            {
                var redditLink = System.Web.HttpUtility.HtmlEncode($"https://reddit.com/message/compose?to={_settings.RedditUsername}&subject=tvods");
                <p><a href="{redditLink}">Contact me on Reddit.</a></p>
            }
        </div>
    </div>

    <div class="container">
        <div class="list-group">
            @foreach (var channel in Model.Channels.OrderBy(x => x))
            {
            <a href="/v/@(channel.ToLower()).html" class="list-group-item">
                <h4>@channel</h4>
            </a>
            }
        </div>
    </div>
</body>
</html>